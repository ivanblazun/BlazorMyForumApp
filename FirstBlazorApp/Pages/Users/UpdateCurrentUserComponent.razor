@using ForumAdminPanel.Models;
@inject UserService userService
@inject NavigationManager navManager
@inject IJSRuntime js
<h3>Update Current User Component</h3>

<EditForm Model="@CurrentUser" OnSubmit="@SaveChanges">
    <div class="mb-3">
        <label for="username" class="form-label">UserName</label>
        <input type="text" class="form-control" id="username" placeholder="CurrentUser.UserName" @bind="@CurrentUser.UserName">
    </div>
    <div class="mb-3">
        <label for="email" class="form-label">Email</label>
        <input type="email" class="form-control" id="email" placeholder="@user.Email" @bind="CurrentUser.Email">
    </div>
    <div class="mb-3">
        <label for="userpassword" class="form-label">Password</label>
        <input type="text" class="form-control" id="userpassword" placeholder="CurrentUser.Password" @bind="CurrentUser.Password">
    </div>
    <button type="submit" class="btn btn-primary">Submit</button>
</EditForm>

@code {
    [Parameter]
    public int id { get; set; }
    [Parameter]
    public User CurrentUser { get; set;}

    private User user { get; set; }

    private void SaveChanges()
    {
        userService.UpdateUser(CurrentUser);
        js.InvokeVoidAsync("alert","User shanges saved");
        string location = "/userprofile/" + CurrentUser.Id.ToString();
        navManager.NavigateTo(location, true);
    }

    protected override async Task OnInitializedAsync()
    {
        user = userService.GetUser(id);
    }
}   
